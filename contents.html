<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Contents</title>
<link rel="stylesheet" href="common.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
  :root{
    --bg:#fcfaf2; --ink:#333; --accent:#ff7e00; --header-h:64px;
    --max:1500px; --gap:28px;
    /* 下段 3カラム幅 */
    --col-left: 0.9fr;   /* 説明 */
    --col-mid:  1.3fr;  /* メイン */
    --col-right:1.5fr;  /* Scratch */
  }
  body{ background:var(--bg); color:var(--ink); }

  /* ===== 上段：イラスト帯（画面上1/3） ===== */
  .hero-illust{
    position:relative;
    height:26vh; min-height:240px;
    display:flex; align-items:flex-end;
    isolation:isolate; overflow:hidden;
  }
  /* 左上のCONTENTS */
  .hero-illust .title{
    position:absolute; left:5vw; top:18%;
    font-weight:800; letter-spacing:.08em; font-size:clamp(2.4rem,2.0vw,3.2rem);
    opacity:.9;
  }
  /* 背景のグレー図形 */
  .hero-illust::before,
  .hero-illust::after{
    content:""; position:absolute; inset:auto; z-index:-1; pointer-events:none;
    background:rgba(0,0,0,.04);
  }
  .hero-illust::before{
    width:44vw; height:44vw; right:-18vw; top:-10vw; border-radius:50%;
    filter:blur(1px);
  }
  .hero-illust::after{
    width:38vw; height:28vw; left:-16vw; bottom:-10vw; border-radius:32px;
    transform:rotate(-8deg);
  }
  /*リンク*/
  .illust-link {
    position:absolute;
    top: 58px;               /* ヒーロー帯の上辺から */
    right: clamp(16px, 6vw, 90px);
    font-size:14px;
    color:#4d4848; text-decoration:none;
    border-bottom:2px solid rgba(0,0,0,.2);
    padding-bottom:2px;
  }
  .illust-link:hover{ color:var(--accent); border-bottom-color: currentColor; }
  /* 右からセンターまでくる帯 */
  .illust-band{
    position: relative;
    margin-left:auto; margin-right:clamp(16px,6vw,80px); margin-bottom: 10px;
    background:#fff; border:1px solid rgba(0,0,0,.08);
    border-radius:16px; box-shadow:0 10px 28px rgba(0,0,0,.07);
    padding:14px; min-width:min(46vw,720px); max-width:820px;
  }
  .illust-row{ margin-left: 10px; display: flex; align-items:center; gap:20px; }
  .gallery-window{
   position: relative;
    overflow: hidden;
    border-radius: 10px;
    background: #eee;
    box-shadow: 0 6px 18px rgba(0,0,0,.06);
  }
  .gallery-window.vert{ width:90px;  height:120px; } /* 縦長2つ */
  .gallery-window.wide{ width:120px; height:90px;  } /* 横長1つ */

  .gw-img, .gw-media{
    position:absolute; inset:0;
    width:100%; height:100%; object-fit:cover;
    opacity:0; transition:opacity .6s ease;
  }
  .gw-img.active{ opacity:1; }

  .gallery-title { 
    margin-top: 40px; font-weight: bold;
  }
  
  /* ===== 下段レイアウト（画面下2/3） ===== */
  .stage{
    max-width:var(--max); margin:16px auto 90px; padding:0 16px;
    display:grid; gap:var(--gap);
    grid-template-columns: var(--col-left) var(--col-mid) var(--col-right);
    align-items:start;
    min-height: 58vh;
  }

  /* 左：説明（作品ごとに連動切替） */
  .left{ position:relative; min-height:580px; }
  .info{
    position:absolute; inset:0;
    background:#fff; border:1px solid rgba(0,0,0,.08);
    border-radius:16px; box-shadow:0 8px 24px rgba(0,0,0,.06);
    padding:18px 20px; line-height:1.95; opacity:0; transform:translateY(8px);
    transition:opacity .25s ease, transform .25s ease;
  }
  .info.active{ opacity:1; transform:none; }
  .info h3{ margin-bottom:23px; font-size:1.08rem; border-bottom:2px solid rgba(0,0,0,.5); }

  /* 中央：メインカード（上下ボタンは外側・薄い） */
  .mid{ position:relative; min-height:580px; }
  .proj{
    position:absolute; inset:0;
    background:#fff; border:1px solid rgba(0,0,0,.08);
    border-radius:16px; box-shadow:0 12px 32px rgba(0,0,0,.08);
    padding:18px; display:flex; flex-direction:column; gap:12px;
    opacity:0; pointer-events:none; transform:translateY(8px);
    transition:opacity .28s ease, transform .28s ease;
  }
  .proj.active{ opacity:1; pointer-events:auto; transform:none; }
  .proj h2{ font-size:clamp(1.2rem,2.6vw,1.6rem); }
  .frame{
    aspect-ratio:16/9; border-radius:12px; overflow:hidden;
    border:1px solid rgba(0,0,0,.08);
    background:linear-gradient(135deg,#f0eee7,#e9e5da);
    display:grid; place-items:center;
  }
  .media {
    width: 100%;
    max-width: 480px;   /* 最大幅を制限 */
    border-radius: 8px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    margin: 0 auto;
    display: block;
  }
  .desc{ margin-top: 20px; line-height:1.9; opacity:.95; }
  .btn-outline{
    align-self:flex-start; display:inline-block; padding:.55rem 1.1rem;
    border:2px solid var(--accent); color:var(--accent);
    border-radius:24px; text-decoration:none; font-weight:700;
    transition:background .15s, color .15s, transform .12s;
  }
  .btn-outline:hover{ background:var(--accent); color:#fff; transform:translateY(-1px); }

  /* 下の薄いボタン（外側） */
  .vbtn{
    position:absolute; left:50%; translate:-50% 0;
    width:24px; height:24px; 
    display:grid; place-items:center;
    color:#7e7061; cursor:pointer;
    backdrop-filter:blur(3px); user-select:none; z-index:3;
  }
  .vbtn.down{ bottom:-30px; }
  .vbtn span{ transform:translateY(-1px); }

  /* 右：Scratchカードの自動ループ＋左右の薄い▶ */
  /* 右カラムを2段に：上=2列、下=1列フル幅 */
.right{
  display: grid;
  grid-template-rows: auto auto;
  gap: 10px;
  justify-self: stretch;
   margin-left: 30px;
}

/* 上段 */
.rtop{
  display: grid;
  grid-template-columns: 1.5fr 2fr;
  gap: 16px;
  align-items: stretch;
}

/* ===== Scratchスライダー（土台） ===== */
.scratch-mini{
  position: relative;
  width: 100%;
  min-height: 260px;     /* 細長くならない基準高さ */
  background:#fff; border:1px solid rgba(0,0,0,.08);
  border-radius:16px; box-shadow:0 8px 22px rgba(0,0,0,.06);
  padding:14px;
}
.scroller.mini{ position: relative; width:100%; min-height:200px; }

/* カード重ね表示（activeのみ表示） */
.s-card{
  position:absolute; inset:0; aspect-ratio:4/3;
  border-radius:12px; border:1px solid rgba(0,0,0,.06);
  background:#fff; box-shadow:0 6px 18px rgba(0,0,0,.06);
  opacity:0; pointer-events:none; transition:opacity .35s ease;
}
.s-card.active{ opacity:1; pointer-events:auto; }

/* 見た目 */
.s-card img{ width:100%; height:100%; object-fit:cover; display:block; border-radius:12px; }
.s-card.theme-amber{ box-shadow:inset 0 0 0 10px rgba(255,224,139,.55); }
.s-card.theme-blue { box-shadow:inset 0 0 0 10px rgba(169,199,223,.55); }
.s-card.theme-coral{ box-shadow:inset 0 0 0 10px rgba(255,184,161,.55); }
.s-caption{
  position:absolute; left:14px; right:14px; bottom:-33px;
  background:rgba(196, 193, 193, 0.5); border:1px solid rgba(0,0,0,.06);
  border-radius:8px; padding:3px 4px; font-weight:500;
}

/* ◀▶ ボタン（位置は外側に薄く） */
.scratch-mini .hbtn{
  position:absolute; top:50%; transform:translateY(-50%);
  width:28px; height:28px; display:grid; place-items:center;
  background:rgba(0,0,0,.04); color:#777; border-radius:999px; cursor:pointer;
}
.scratch-mini .hbtn.prev{ left:-10px; }
.scratch-mini .hbtn.next{ right:-10px; }
.scratch-mini .hbtn:hover{ background:rgba(0,0,0,.08); color:#444; }

/* ===== 右列のScratch経緯ボックス ===== */
.scr-reason{
  background:#fff; border:1px solid rgba(0,0,0,.08);
  border-radius:16px; box-shadow:0 8px 22px rgba(0,0,0,.06);
  padding:14px; line-height:1.9;
}
.scr-reason h3{ margin:0 0 8px; font-size:1.02rem; }

/* ===== 下段の Unity ボックス（動画＋説明を同じカード内） ===== */
.rbottom{ display:block; }
.unity-card{
  background:#fff; border:1px solid rgba(0,0,0,.08);
  border-radius:16px; box-shadow:0 8px 22px rgba(0,0,0,.06);
  padding:14px;
}
.u-media{
  width:60%; aspect-ratio:4/3;
  border-radius:12px; overflow:hidden;
  border:1px solid rgba(0,0,0,.08);
  background:linear-gradient(135deg,#f0eee7,#e9e5da);
  margin:0 0 10px;
}
.u-video{ width:100%; height:100%; object-fit:cover; display:block; }
.u-desc{ line-height:1.3; opacity:.95; }

  /* レスポンシブ */
  @media (max-width: 1100px){
  /* ===== 追加したい新処理 ===== */
  .stage{
    display: block;
    grid-template-columns: 1fr; /* 1カラム */
    padding: 0 16px;
  }
  .left, .mid, .right{
    display:block;
    width:100%;
    position: static !important;   
    float: none !important;       
    margin: 0 0 24px 0;
  }

  /* ===== 既存処理で必要なもの ===== */
  .hero-illust{ height:28vh; }
  .illust-row img{ width:92px; height:64px; }
  .rtop{ grid-template-columns: 1fr; }
  .hbtn.prev{ left:6px } .hbtn.next{ right:6px }
  .vbtn.up{ top:6px } .vbtn.down{ bottom:6px }
  .scratch-mini{ grid-template-columns: 1fr; }

  /* ===== 追加のおすすめ ===== */
  .illust-row{ flex-wrap: wrap; gap:10px 12px; }
  .gallery-window.vert{ width:28vw; height:42vw; }
  .gallery-window.wide{ width:60vw; height:38vw; }
}

</style>
</head>
<body>

<header class="site-header">
  <div class="brand">PORTFOLIO</div>
  <button class="hamburger" id="menuBtn" aria-expanded="false" aria-controls="globalMenu" aria-label="Open menu">
    <span class="bars"></span>
  </button>
  <nav class="menu" id="globalMenu" aria-label="Site navigation">
    <a href="about.html">About</a>
    <a href="contents.html">Contents</a>
    <a href="contact.html">Contact</a>
  </nav>
</header>

<!-- 上段：イラスト帯 -->
<section class="hero-illust">
  <div class="title">CONTENTS</div>

  <!-- 帯の外側右上リンク（帯の外に出す） -->
  <a class="illust-link" href="gallery/illust.pdf" target="_blank" rel="noopener">
    ILLUSTRATION PORTFOLIO <i class="fa-solid fa-angle-right"></i>
  </a>

  <!-- 帯本体 -->
  <div class="illust-band">
    <div class="illust-row">
      <!-- 窓1〜3：画像はJSで挿入 -->
      <div class="gallery-window vert" id="gallery1"></div>
      <div class="gallery-window vert" id="gallery2"></div>
      <div class="gallery-window wide" id="gallery3"></div>

      <!-- 窓4：動画（スライドしない） -->
      <div class="gallery-window wide" id="gallery4">
        <video class="gw-media" autoplay loop muted playsinline>
          <source src="gallery/anim.mp4" type="video/mp4">
        </video>
      </div>

      <span class="gallery-title">ILLUSTRATION GALLERY</span>
    </div>
  </div>
</section>


<!-- 下段：3カラム -->
<section class="stage">
  <!-- 左：説明（連動切替） -->
  <aside class="left">
    <article class="info active" data-idx="0">
      <h3>ラーメン制作マニュアル（ゲーム風）</h3>
      <p>素早い試作から完成度までを段階的に。<strong>ツールやプログラミングに慣れること</strong>を目的に、Scratch→Unity→Javaで同テーマを実装しました。<br><br>
        <strong>「多様なレシピを覚える負担」</strong>や<br><strong>「練習用ドリンクを捨てるもったいなさ」</strong><br>
         といった飲食アルバイト時代に感じた課題をもとに、学びを楽しく効率化するマニュアルアプリを形にしました。</p>
    </article>
    <article class="info" data-idx="1">
      <h3>どこつぶアプリ（授業）</h3>
      <p>「スッキリわかるサーブレット/JSP入門」記載コードから、拡張機能を追加。</p>
    </article>
    <article class="info" data-idx="2">
      <h3>Todoリストアプリ</h3>
      <p>鋭意制作中。<br>まもなくGitHub公開予定。</p>
    </article>
  </aside>

  <!-- 中央：メイン（上下ボタンは外側） -->
  <section class="mid" id="mid">
    <button class="vbtn down" aria-label="次へ"><span>▼</span></button>

    <article class="proj active" data-idx="0">
      <h2>ラーメン制作マニュアル</h2>
      <div class="frame">
        <video class="media" autoplay loop muted playsinline preload="metadata" poster="images/scratch-poster.jpg">
        <source src="videos/ramneUnity ‐ Clipchampで作成.mp4" type="video/mp4">お使いのブラウザは動画再生に対応していません
        </video>
        <div class="r-caption">Scratch</div>
      </div>
      <p class="desc">操作性・演出・ロジックを段階的に設計。詳細ページで3実装を比較できます。</p>
      <a class="btn-outline" href="ramen.html">詳細を見る</a>
    </article>

    <article class="proj" data-idx="1">
      <h2>どこつぶアプリ（授業）</h2>
      <div class="frame"></div>
      <p class="desc">ユーザー登録、ログインをすることでつぶやきが可能となるアプリ。</p>
    </article>

    <article class="proj" data-idx="2">
      <h2>Todoリストアプリ</h2>
      <div class="frame"></div>
      <p class="desc">公開予定地</p>
    </article>
  </section>

  <!-- 右：Scratch自動ループ＋薄い▶ボタン＋固定説明 -->
  <!-- 上段  -->
  <section class="right">
  <section class="rtop">
    <!-- 左：Scratch制作の経緯 -->
    <aside class="scr-reason">
      <h3>scratchゲーム</h3>
      <p>短期のアイデア検証と操作感の試作を目的に制作。即時フィードバックと反復を重視しています。<br>実際のゲームの様子を早送りでご覧いただけます。</p>
    </aside>

    <article class="scratch-card">
      <!-- 左：Scratch GIFスライダー（既存のをそのまま） -->
      <section class="scratch-mini" id="scratchMini">
        <div class="scroller mini" aria-label="Scratch作品スライドショー">
          <article class="s-card theme-amber active">
            <img src="images/shooting_game_demo.gif" alt="">
            <div class="s-caption">シューティングゲーム</div>
          </article>
          <article class="s-card theme-blue">
            <img src="images/grow.gif" alt="">
            <div class="s-caption">育成ゲーム</div>
          </article>
          <article class="s-card theme-coral">
            <img src="images/catch.gif" alt="">
            <div class="s-caption">キャッチゲーム</div>
          </article>
        </div>
        
        <button class="hbtn prev" aria-label="前"><span>◀</span></button>
        <button class="hbtn next" aria-label="次"><span>▶</span></button>
    </section>  
    </article>
  </section>

  <!-- 下段：1列フル幅（同じボックス内に動画＋説明） -->
  <section class="rbottom">
    <article class="unity-card">
      <h3>Unity作品</h3>
      <div class="u-media">
        <video class="u-video toggle-video" autoplay loop muted playsinline preload="metadata" poster="images/unity-poster.jpg">
          <source src="videos/LostPromise.mp4" type="video/mp4">
        </video>
      </div>
      <p class="u-desc">オリジナルノベルゲームを制作中です。タイトル画面、メニュー画面、セーブ画面<br>
                        制作ツール: Unity　／　イメージイラスト: ChatGPT</p>
    </article>
  </section>
  </section>


<script>
/* ヘッダーメニュー（共通） */
const btn = document.getElementById('menuBtn');
const menu = document.getElementById('globalMenu');
function closeMenu(){ menu.classList.remove('open'); btn?.setAttribute('aria-expanded','false'); }
btn?.addEventListener('click', ()=>{ const open = menu.classList.toggle('open'); btn.setAttribute('aria-expanded', open ? 'true' : 'false'); });
document.addEventListener('click', (e)=>{ if(!menu.contains(e.target) && !btn.contains(e.target)) closeMenu(); });
document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeMenu(); });


// ===== 画像セットを窓ごとに定義（4枚ずつ）=====
const GW_SETS = {
  gallery1: [
    'gallery/img1-1.png','gallery/img1-2.png',
    'gallery/img1-3.png','gallery/img1-4.png'
  ],
  gallery2: [
    'gallery/img2-1.jpg','gallery/img2-2.png',
    'gallery/img2-3.png','gallery/img2-4.jpg'
  ],
  gallery3: [
    'gallery/img3-1.png','gallery/img3-2.png',
    'gallery/img3-3.png','gallery/img3-4.jpg'
  ]
  // gallery4 は動画なので除外
};

// ===== パラメータ =====
const PERIOD  = 4500;   // 切替間隔（ゆっくり目）
const STAGGER = 1000;   // 窓ごとの開始遅延（1秒ずつ）

// 画像プリロード（任意：切替をなめらかに）
Object.values(GW_SETS).flat().forEach(src => { const i=new Image(); i.src=src; });

// 窓を開始
Object.entries(GW_SETS).forEach(([winId, list], idx) => {
  const wrap = document.getElementById(winId);
  if (!wrap || !list?.length) return;

  // 枠内に <img> を生成（最初の1枚だけ active）
  let cur = 0;
  list.forEach((src, i) => {
    const img = document.createElement('img');
    img.className = 'gw-img' + (i===0 ? ' active' : '');
    img.src = src;
    img.alt = '';
    wrap.appendChild(img);
  });
  const imgs = wrap.querySelectorAll('.gw-img');

  // 遅延スタート → 周期ループ
  setTimeout(() => {
    setInterval(() => {
      imgs[cur].classList.remove('active');
      cur = (cur + 1) % imgs.length;
      imgs[cur].classList.add('active');
    }, PERIOD);
  }, idx * STAGGER);
});

//動画停止
document.querySelectorAll('.toggle-video').forEach(v=>{
  v.addEventListener('click',()=>{
    if(v.paused){ v.play(); v.classList.remove('is-paused'); }
    else{ v.pause(); v.classList.add('is-paused'); }
  });
});

/* ===== 中央：作品切替（上下ボタン + ホイール） ===== */
const projects = [...document.querySelectorAll('.proj')];
const infos    = [...document.querySelectorAll('.left .info')];

const down = document.querySelector('.vbtn.down');
let idx = 0;
function show(i){
  idx = (i + projects.length) % projects.length;
  projects.forEach((p,k)=> p.classList.toggle('active', k===idx));
  infos.forEach((f,k)=> f.classList.toggle('active', k===idx));
}

down.addEventListener('click', ()=> show(idx+1));
// ホイールでも切替（中央枠の上だけ）
document.getElementById('mid').addEventListener('wheel', (e)=>{
  if(e.deltaY>0) show(idx+1); else show(idx-1);
},{passive:true});

/* ===== 右：Scratch 自動ループ + ▶ ◀ ===== */
(function(){
  const root = document.getElementById('scratchMini');
  if(!root) return;

  const cards = Array.from(root.querySelectorAll('.s-card'));
  const prev  = root.querySelector('.prev');
  const next  = root.querySelector('.next');

  let i = 0;
  const show = idx => {
    cards.forEach((c, j)=> c.classList.toggle('active', j === idx));
  };

  const goNext = () => { i = (i + 1) % cards.length; show(i); };
  const goPrev = () => { i = (i - 1 + cards.length) % cards.length; show(i); };

  prev.addEventListener('click', goPrev);
  next.addEventListener('click', goNext);

  // 自動ループ（ゆっくりめ）
  let timer = setInterval(goNext, 3800);
  // 操作したら一旦リセットして気持ちよく
  [prev, next].forEach(btn=>{
    btn.addEventListener('click', ()=>{
      clearInterval(timer);
      timer = setInterval(goNext, 3800);
    });
  });

  // 初期表示
  show(i);
})();
</script>
</body>
</html>



